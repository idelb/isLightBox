!function(e){e.fn.isLightBox=function(t){var i={revealSpeed:400,background:"rgba(0,0,0,.8)",overlayClose:!0,escKey:!0,infinite:!1},s=e.extend({},i,t);e(this).each(function(){e.isLightBox.init(e(this),s)})};var t={isLightBox:{gallery:[],init:function(t,i){var s=this;t.on("click",function(n){n.preventDefault(),s.events.callInit(t);var l=e(this).attr("href");s.createIsLightBox(l,i,t)})},events:{triggerEvent:function(t,i){i=void 0===i?e(document):i,i.trigger("islb:"+t)},callInit:function(e){t.isLightBox.events.triggerEvent("init",e)},callOpen:{triggerEvent:function(e,i){t.isLightBox.events.triggerEvent("open:"+e,i)},before:function(e){this.triggerEvent("before",e)},after:function(e){this.triggerEvent("after",e)}},callClose:{triggerEvent:function(e,i){t.isLightBox.events.triggerEvent("close:"+e,i)},before:function(e){this.triggerEvent("before",e)},after:function(e){this.triggerEvent("after",e)}}},setStyles:function(t){var i='<style type="text/css" id="islb-styles">.islb {background-color: '+t.background+"; transition: opacity "+t.revealSpeed/1e3+"s ease-in-out;} .islb.islb-active {transition: opacity "+t.revealSpeed/1e3+"s ease-in-out;}</style>";e("head").find("#islb-styles").remove(),e("head").append(i)},refreshArrows:function(e,t,i){i.infinite||(this.refreshNext(e,t),this.refreshPrev(e,t))},refreshNext:function(t,i){var s=t+1;s===this.gallery[i].length?e(".islb-next").addClass("islb-disabled"):e(".islb-next").removeClass("islb-disabled")},refreshPrev:function(t,i){0===t?e(".islb-prev").addClass("islb-disabled"):e(".islb-prev").removeClass("islb-disabled")},createIsLightBox:function(t,i,s){var n=this,l=s.data("islightbox"),a=e("<div>",{class:"islb"}),r=e("<div>",{class:"islb-close"}),o=e("<div>",{class:"islb-next"}),c=e("<div>",{class:"islb-prev"});if(n.setStyles(i),""!==l){a.addClass("islb-gallery"),void 0===n.gallery[l]&&(n.gallery[l]=[],e('[data-islightbox="'+l+'"]').each(function(t){n.gallery[l][t]={path:e(this).attr("href")},e(this).attr("data-islightbox-counter",t)}));var g=s.data("islightbox-counter");o.on("click",function(){e(this).hasClass("islb-disabled")||(g===n.gallery[l].length-1&&(g=-1),n.gotoToElement(n.gallery[l][g+1].path),g++,n.refreshArrows(g,l,i))}),c.on("click",function(){e(this).hasClass("islb-disabled")||(0===g&&(g=n.gallery[l].length),n.gotoToElement(n.gallery[l][g-1].path),g--,n.refreshArrows(g,l,i))})}a.html([r,o,c]).append(n.getContainer(t)),e("body").append(a),n.refreshArrows(g,l,i),n.events.callOpen.before(s),setTimeout(function(){a.addClass("islb-active"),n.events.callOpen.after(s)},100),i.overlayClose?a.on("click",function(t){0!=e(t.target).closest(".islb-media").length&&!e(t.target).hasClass("islb-media")||e(t.target).hasClass("islb-next")||e(t.target).hasClass("islb-prev")||n.destroyIsLightBox(i,s)}):r.on("click",function(e){n.destroyIsLightBox(i,s)}),i.escKey&&e(document).on("keyup",function(e){27==e.keyCode&&n.destroyIsLightBox(i,s)})},getContainer:function(t){var i=e("<div>",{class:"islb-container"}),s=e("<div>",{class:"islb-media-container"}),n=e("<div>",{class:"islb-media"});return i.html(s.html(n.html(this.getElement.init(t))))},gotoToElement:function(t){var i=this.getContainer(t);i.css({opacity:0}),e(".islb .islb-container").animate({opacity:0},"slow",function(){e(".islb .islb-container").remove(),e(".islb").append(i),i.animate({opacity:1},"slow")})},destroyIsLightBox:function(t,i){var s=this;s.events.callClose.before(i),e(".islb").removeClass("islb-active"),e(document).off("keyup"),setTimeout(function(){e(".islb").remove(),s.events.callClose.after(i)},t.revealSpeed+100)},getElement:{init:function(e){return this.getImage(e)},getImage:function(t){return e("<img>",{src:t})}}}};e.extend(t)}(jQuery),$(function(){$("[data-islightbox]").isLightBox()});