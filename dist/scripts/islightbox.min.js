"use strict";!function(e){e.fn.isLightBox=function(t){var i={revealSpeed:400,changeSpeed:800,background:"rgba(0,0,0,.8)",overlayClose:!0,escKey:!0,infinite:!0},s=e.extend({},i,t);e(this).each(function(){var t=s,a=e(this).data("islightbox");if(""!==a&&e('[data-islightbox-gallery="'+a+'"]').length>0){var n=e('[data-islightbox-gallery="'+a+'"]');t=e.extend({},i,n.data("islightbox-config"))}else void 0!==e(this).data("islightbox-config")&&(t=e.extend({},i,e(this).data("islightbox-config")));e.isLightBox.init(e(this),t)})};var t={isLightBox:{gallery:[],init:function(t,i){var s=this;t.on("click",function(a){a.preventDefault(),s.events.callInit(t);e(this).attr("href");s.createIsLightBox(i,t)})},events:{triggerEvent:function(t,i){i=void 0===i?e(document):i,i.trigger("islb:"+t)},callInit:function(e){t.isLightBox.events.triggerEvent("init",e)},callOpen:{triggerEvent:function(e,i){t.isLightBox.events.triggerEvent("open:"+e,i)},before:function(e){this.triggerEvent("before",e)},after:function(e){this.triggerEvent("after",e)}},callClose:{triggerEvent:function(e,i){t.isLightBox.events.triggerEvent("close:"+e,i)},before:function(e){this.triggerEvent("before",e)},after:function(e){this.triggerEvent("after",e)}}},setStyles:function(t){var i='<style type="text/css" id="islb-styles">.islb {background-color: '+t.background+"; transition: opacity "+t.revealSpeed/1e3+"s ease-in-out;} .islb.islb-active {transition: opacity "+t.revealSpeed/1e3+"s ease-in-out;}</style>";e("head").find("#islb-styles").remove(),e("head").append(i)},refreshArrows:function(e,t,i){i.infinite||(this.refreshNext(e,t),this.refreshPrev(e,t))},refreshNext:function(t,i){var s=t+1;s===this.gallery[i].length?e(".islb-next").addClass("islb-disabled"):e(".islb-next").removeClass("islb-disabled")},refreshPrev:function(t,i){0===t?e(".islb-prev").addClass("islb-disabled"):e(".islb-prev").removeClass("islb-disabled")},createIsLightBox:function(t,i){var s=this,a=i.data("islightbox"),n=i.attr("href"),o=i.attr("title"),l=e("<div>",{class:"islb"}),r=e("<div>",{class:"islb-close"}),c=e("<div>",{class:"islb-next"}),d=e("<div>",{class:"islb-prev"});if(s.setStyles(t),""!==a){l.addClass("islb-gallery"),void 0===s.gallery[a]&&(s.gallery[a]=[],e('[data-islightbox="'+a+'"]').each(function(t){s.gallery[a][t]={path:e(this).attr("href"),title:e(this).attr("title")},e(this).attr("data-islightbox-counter",t)}));var g=i.data("islightbox-counter");c.on("click",function(){if(!e(this).hasClass("islb-disabled")){g===s.gallery[a].length-1&&(g=-1);var i=s.gallery[a][g+1];s.gotoToElement(i.path,i.title,t),g++,s.refreshArrows(g,a,t)}}),d.on("click",function(){if(!e(this).hasClass("islb-disabled")){0===g&&(g=s.gallery[a].length);var i=s.gallery[a][g-1];s.gotoToElement(i.path,i.title,t),g--,s.refreshArrows(g,a,t)}})}l.html([r,c,d]).append(s.getContainer(n,o)),e("body").append(l),s.addMediaCaption(o,t),s.refreshArrows(g,a,t),s.events.callOpen.before(i),setTimeout(function(){l.addClass("islb-active"),s.events.callOpen.after(i)},100),t.overlayClose?l.on("click",function(a){0!=e(a.target).closest(".islb-media").length&&!e(a.target).hasClass("islb-media")||e(a.target).hasClass("islb-next")||e(a.target).hasClass("islb-prev")||s.destroyIsLightBox(t,i)}):r.on("click",function(e){s.destroyIsLightBox(t,i)}),t.escKey&&e(document).on("keyup",function(e){27==e.keyCode&&s.destroyIsLightBox(t,i)})},addMediaCaption:function(t,i){e(".islb").find(".islb-media-caption").length>0?e(".islb").find(".islb-media-caption").animate({opacity:0},i.changeSpeed,function(){e(this).remove(),""!==t&&void 0!==t&&e(".islb").append(e("<div>",{class:"islb-media-caption"}).css({opacity:0}).text(t).animate({opacity:1},i.changeSpeed))}):""!==t&&void 0!==t&&e(".islb").append(e("<div>",{class:"islb-media-caption"}).text(t))},getContainer:function(t,i,s){var a=e("<div>",{class:"islb-container"}),n=e("<div>",{class:"islb-media-container"}),o=e("<div>",{class:"islb-media"});return this.addMediaCaption(i,s),a.html(n.html(o.html(this.getElement.init(t))))},gotoToElement:function(t,i,s){var a=this.getContainer(t,i,s);a.css({opacity:0}),e(".islb .islb-container").animate({opacity:0},s.changeSpeed,function(){e(".islb .islb-container").remove(),e(".islb").append(a),a.animate({opacity:1},s.changeSpeed)})},destroyIsLightBox:function(t,i){var s=this;s.events.callClose.before(i),e(".islb").removeClass("islb-active"),e(document).off("keyup"),setTimeout(function(){e(".islb").remove(),s.events.callClose.after(i)},t.revealSpeed+100)},getElement:{imagesExtension:["jpg","jpeg","png","gif","tif","bmp","svg"],init:function(t){var i=t.substr(t.lastIndexOf(".")+1),s=t.match(/(youtube|youtu|vimeo|dailymotion|kickstarter)\.(com|be)\/((watch\?v=([-\w]+))|(video\/([-\w]+))|(projects\/([-\w]+)\/([-\w]+))|([-\w]+))/);return e.inArray(i,this.imagesExtension)>-1?this.getImage(t):null!==s?this.getVideo(t,s):this.getExternalLink(t)},getImage:function(t){return e("<img>",{src:t})},getExternalLink:function(t){return e("<iframe>",{src:t})},getVideo:function(e,t){switch(t[1]){case"youtube":case"youtu":e="http://www.youtube.com/embed/"+t[5];break;case"vimeo":e="http://player.vimeo.com/video/"+t[3];break;case"dailymotion":e="https://www.dailymotion.com/embed/video/"+t[7];break;case"kickstarter":e="https://www.kickstarter.com/projects/"+t[9]+"/"+t[10]+"/widget/video.html"}return this.getExternalLink(e)}}}};e.extend(t)}(jQuery),$(function(){$("[data-islightbox]").isLightBox()});